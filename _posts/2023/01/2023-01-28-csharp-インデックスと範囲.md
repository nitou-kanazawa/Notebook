---
title: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ç¯„å›²
category: C#
tags:
  - C#
---


<!-- more -->

## Indexã¨Range

#### Indexæ§‹é€ ä½“
[`System.Index`][Indexæ§‹é€ ä½“]ã¯ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®å…ˆé ­ï¼Œã¾ãŸã¯æœ«å°¾ã‹ã‚‰ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¡¨ã™å‹ï¼

```cs
public readonly struct Index : IEquatable<Index> {
    
    public int Value { get; }
    public bool IsFromEnd { get; }

    // Contructor
    public Index(int value, bool fromEnd = false);

    // Factory
    public static Index Start { get; }
    public static Index End { get; }
    public static Index FromStart(int value);
    public static Index FromEnd(int value);
}
```


#### Rangeæ§‹é€ ä½“
[`System.Range`][Rangeæ§‹é€ ä½“]ã¯ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®é–‹å§‹ã¨çµ‚äº†ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æŒã¤ç¯„å›²ã‚’è¡¨ã™å‹ï¼

```cs
public readonly struct Range : IEquatable<Range> {
    
    public Index End { get; }
    public Index Start { get; }

    // Contructor
    public Range(Index start, Index end);

    // Factory
    public static Range All { get; }
    public static Range EndAt(Index end);
    public static Range StartAt(Index start);
}
```

## æ§‹æ–‡

#### æ¼”ç®—å­

- `^` æœ«å°¾ã‹ã‚‰ã‚’è¡¨ã™ï¼

```cs
int i
Index index1 = i;     // å…ˆé ­ã‹ã‚‰iç•ªç›®ã®è¦ç´ 
Index index2 = ^i;    // æœ«å°¾ã‹ã‚‰(i-1)ç•ªç›®ã®è¦ç´ 
```

- `..` ç¯„å›²ã‚’è¡¨ã™ 

```cs
Range range1 = index1..index2;  // index1 ã‹ã‚‰ index2 ã¾ã§
Range range2 = index1..;        // index1 ã‹ã‚‰æœ«å°¾ã¾ã§
Range range3 = ..index2;        // å…ˆé ­ã‹ã‚‰ index2 ã¾ã§
```

```cs
Range range1 = i..j;    // å…ˆé ­ã‹ã‚‰`i`ç•ªç›® ï½ å…ˆé ­ã‹ã‚‰`j-1`ç•ªç›®ã¾ã§
Range range2 = i..^j;   // å…ˆé ­ã‹ã‚‰`i`ç•ªç›® ï½ æœ«å°¾ã‹ã‚‰`j`ç•ªç›®ã®è¦ç´ ã¾ã§  â€»ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨é•ã„-1ã—ãªã„
Range range3 = ..;      // å…¨ç¯„å›²   
```

â€»é…åˆ—ã‹ã‚‰ç¯„å›²ã‚’å–å¾—ã™ã‚‹ã¨ï¼Œçµæœã¯å‚ç…§ã•ã‚Œã‚‹ã®ã§ã¯ãªãï¼Œæœ€åˆã®é…åˆ—ã‹ã‚‰ã‚³ãƒ”ãƒ¼ã•ã‚ŒãŸé…åˆ—ãŒè¿”ã•ã‚Œã‚‹ï¼ã‚ˆã£ã¦ï¼Œå–å¾—ã—ãŸé…åˆ—ã«å€¤ã‚’ä»£å…¥ã—ã¦ã‚‚å…ƒã®é…åˆ—ã«ã¯å½±éŸ¿ã—ãªã„ï¼


## ã¾ã¨ã‚

ã©ã®ã‚ˆã†ã«å±•é–‹ã•ã‚Œã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ã¨ç†è§£ã—ã‚„ã™ã„ã¨æ€ã†ï¼

| å¼ | çµæœ | èª¬æ˜ |
|----|------|------|
| `a[i]` | `a[i]` | `i` ç•ªç›®ã®è¦ç´ ã‚’å–å¾—ï¼ˆ0-based indexï¼‰ |
| `a[^i]` | `a[a.Length - i]` | `i` ç•ªç›®ã®å¾Œã‚ã‹ã‚‰ã®è¦ç´ ã‚’å–å¾—ï¼ˆ1-based indexï¼‰ |
| `a[i..j]` | `{ a[i], a[i+1], ..., a[j-1] }` | `i` ã‹ã‚‰ `j-1` ã¾ã§ã®è¦ç´ ã‚’å–å¾—ï¼ˆã‚¹ãƒ©ã‚¤ã‚¹ï¼‰ |
| `a[i..^j]` | `{ a[i], ..., a[a.Length - j - 1] }` | `i` ã‹ã‚‰å¾Œã‚ `j` ç•ªç›®ã®æ‰‹å‰ã¾ã§ã®è¦ç´ ã‚’å–å¾— |
| `a[i..]` | `{ a[i], ..., a[a.Length - 1] }` | `i` ã‹ã‚‰æœ€å¾Œã¾ã§ã®è¦ç´ ã‚’å–å¾— |
| `a[..j]` | `{ a[0], ..., a[j-1] }` | å…ˆé ­ã‹ã‚‰ `j-1` ã¾ã§ã®è¦ç´ ã‚’å–å¾— |
| `a[..^j]` | `{ a[0], ..., a[a.Length - j - 1] }` | å…ˆé ­ã‹ã‚‰å¾Œã‚ `j` ç•ªç›®ã®æ‰‹å‰ã¾ã§ã®è¦ç´ ã‚’å–å¾— |
| `a[^i..]` | `{ a[a.Length - i], ..., a[a.Length - 1] }` | å¾Œã‚ `i` ç•ªç›®ã®è¦ç´ ã‹ã‚‰æœ€å¾Œã¾ã§å–å¾— |
| `a[..]` | `{ a[0], ..., a[a.Length - 1] }` | é…åˆ—å…¨ä½“ã‚’å–å¾—ï¼ˆ`a` ã¨åŒã˜ï¼‰ |


**å…·ä½“ä¾‹ (`a = {1, 2, 3, 4, 5, 6}` ã®å ´åˆ)**
| å¼ | çµæœ (`int[]`) |
|----|--------------|
| `a[2]` | `3` |
| `a[^2]` | `5` |
| `a[1..4]` | `{2, 3, 4}` |
| `a[1..^2]` | `{2, 3, 4}` |
| `a[2..]` | `{3, 4, 5, 6}` |
| `a[..4]` | `{1, 2, 3, 4}` |
| `a[..^2]` | `{1, 2, 3, 4}` |
| `a[^3..]` | `{4, 5, 6}` |
| `a[..]` | `{1, 2, 3, 4, 5, 6}` |


## å‚è€ƒè³‡æ–™
- [MS: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ç¯„å›²](https://learn.microsoft.com/ja-jp/dotnet/csharp/tutorials/ranges-indexes)
- [qiita: Indexå‹ã¨Rangeå‹ã§å¿«é©ã«é…åˆ—ã‚’æ‰±ã†](https://qiita.com/Euglenach/items/c433afe78d72fc1a18fc)
- [ã¯ãªã¡ã‚‹: é…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ»ç¯„å›²ã®æŒ‡å®šæ–¹æ³•ã¾ã¨ã‚](https://www.hanachiru-blog.com/entry/2023/04/06/120000)
- [hatena: æ¯æŠœã C# ï½ New Normal ãªã‚³ãƒ¼ãƒ‰ã®æ›¸ãæ–¹ï¼šç¬¬08å›ã€Œãƒªã‚¹ãƒˆã¨é…åˆ—ã€ ï½](https://blog.ecbeing.tech/entry/2024/07/26/080000)


<!-- ãƒªãƒ³ã‚¯ -->
[Indexæ§‹é€ ä½“]: https://learn.microsoft.com/ja-jp/dotnet/api/system.index?view=net-9.0
[Rangeæ§‹é€ ä½“]: https://learn.microsoft.com/ja-jp/dotnet/api/system.range?view=net-9.0






ã“ã®è¡¨ã‚’å‚è€ƒã«ã™ã‚Œã°ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ç¯„å›²æŒ‡å®šã®å‹•ä½œãŒæ•´ç†ã§ãã‚‹ã¨æ€ã„ã¾ã™ï¼ ğŸš€